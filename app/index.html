<!-- 'http://api.forecast.io/forecast/f71f75cd9e99dbc211c6e48ceaae557c/47.705936,-122.320500?callback=?'
 -->
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<title> WEATHERVIZ BETA </title>
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="libs/Three.min.js"></script>
<script src="libs/dat.gui.min.js"></script>


</head>

<body>


<form id="zipcode_form" class="form">
<label for="zipcode">zipcode</label>
<input type="text" id="zipcode" class=".blinking-cursor" style="width: 100px;">

 </form>
<div id="threeJSContainer"> </div>

<script>
window.addEventListener('resize', function () {
  renderer.setSize(window.innerWidth, window.innerHeight);
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
});
var scene, camera, renderer, cube, hemilight, plane1, plane2, plane3, plane4;
var planeSpeed = 0.015;
var gui, Timeline, controller, controller2;

function init(){
  scene = new THREE.Scene();
  camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
  camera.position.z = 10;
  renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
  renderer.setSize( window.innerWidth, window.innerHeight );
  $('#threeJSContainer').append( renderer.domElement );

//GUI
  gui = new dat.GUI();
  function Params() {
    //camera speed
    this.Zoom = -10;
    this.CubeColor = "#ff00ff";
  }
  var params = new Params();
  controller = gui.add(params, 'Zoom', -50.0, 10.0).step(0.25);
  controller.listen();
  controller.onChange(function(value) {
    camera.position.z = value * -1;
  });

  controller2 = gui.addColor(params, 'CubeColor');
  controller2.onChange(function(colorValue) {
    colorValue=colorValue.replace( '#','0x' );
    var colorObject = new THREE.Color(colorValue);
    cube.material.color.setHex(colorValue);
  });

  //light
  hemilight = new THREE.HemisphereLight (0xffffff, 0xffffff, 0.6);
  scene.add(hemilight);

//test cube
  var geometry = new THREE.BoxGeometry( 1, 1, 1 );
  var material = new THREE.MeshPhongMaterial( { color: 0xff00ff } );
  cube = new THREE.Mesh( geometry, material );
  scene.add( cube );

//test transparent
  var geometry1 = new THREE.BoxGeometry(10,10,3);
  var material1 = new THREE.MeshPhongMaterial({color: 0xff00ff, transparent: true, wireframe: false, opacity: 0.2});
  plane1 = new THREE.Mesh(geometry1, material1);
  plane1.position.set(0, 0, -10);
  scene.add(plane1);

  var geometry2 = new THREE.BoxGeometry(10,10,3);
  var material2 = new THREE.MeshPhongMaterial({color: 0x00ffff, transparent: true, wireframe: false, opacity: 0.2});
  plane2 = new THREE.Mesh(geometry2, material2);
  plane2.position.set(0, 0, -15);
  scene.add(plane2);

  var geometry3 = new THREE.BoxGeometry(10,10,3);
  var material3 = new THREE.MeshPhongMaterial({color: 0xff0000, transparent: true, wireframe: false, opacity: 0.2});
  plane3 = new THREE.Mesh(geometry3, material3);
  plane3.position.set(0, 0, -20);
  scene.add(plane3);

  var geometry4 = new THREE.BoxGeometry(10,10,3);
  var material4 = new THREE.MeshPhongMaterial({color: 0x0000ff, transparent: true, wireframe: false, opacity: 0.2});
  plane4 = new THREE.Mesh(geometry3, material4);
  plane4.position.set(0, 0, -25);
  scene.add(plane4);


}

function render() {

  requestAnimationFrame(render);
  cube.rotation.x += 0.01;
  cube.rotation.y += 0.01;
  plane1.position.z += planeSpeed;
  plane2.position.z += planeSpeed;
  plane3.position.z += planeSpeed;
  plane4.position.z += planeSpeed;

  renderer.render(scene, camera);

}


//on startup
$(function() {
//threeJS setup
init();
render();
// $("#zipcode").focus();

// var weatherObj;

// //hide this somewhere!
// var apiKey = "f71f75cd9e99dbc211c6e48ceaae557c";

// //get forecast based on user ZIP

// $('#zipcode_form').submit(function(e) {
//   e.preventDefault();
//   // var zip = $('#zipcode').val();
//   // $.getJSON('http://api.wunderground.com/api/19e8ddc94141aec0/forecast/q/'
//   //  + zip + '.json', function(data){
//   //   console.log(data);
//   // });
//   //fade form
  $('#zipcode_form').fadeOut(1000);
  // setTimeout(function(){
  $('#threeJSContainer').fadeIn(3000);
  // }, 2000);
// });




});

</script>
</body>
</html>
